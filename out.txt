[seed] 267214504
[roundtrip] ./sample_poc/stuff.glsl (0/1)
Passing this source code: uniform struct S1 { samplerCube ar; } a1;
uniform struct S2 { S1 s; } a2;

vec4 v;

void main ()
{
    v = textureCube(a2.s.ar, vec3(1.0));
}
Got this thing here: TranslationUnit(items=[StructDecl(struct_type=StructType(name='S1', members=[StructField(type_name=TypeName(name='samplerCube', precision=None, qualifiers=[]), name='ar', array_size=[])]), declarators=[Declarator(name='a1', base_type=StructType(name='S1', members=[StructField(type_name=TypeName(name='samplerCube', precision=None, qualifiers=[]), name='ar', array_size=[])]), array_size=None, init=None, storage='uniform')]), StructDecl(struct_type=StructType(name='S2', members=[StructField(type_name=TypeName(name='S1', precision=None, qualifiers=[]), name='s', array_size=[])]), declarators=[Declarator(name='a2', base_type=StructType(name='S2', members=[StructField(type_name=TypeName(name='S1', precision=None, qualifiers=[]), name='s', array_size=[])]), array_size=None, init=None, storage='uniform')]), GlobalDecl(decls=[VarDecl(type_name=TypeName(name='vec4', precision=None, qualifiers=[]), name='v', array_dims=[], init=None)]), FunctionDef(return_type=TypeName(name='void', precision=None, qualifiers=[]), name='main', params=[], body=BlockStmt(stmts=[ExprStmt(expr=BinaryExpr(op='=', left=Identifier(name='v'), right=CallExpr(callee=Identifier(name='textureCube'), args=[BinaryExpr(op=',', left=MemberExpr(base=MemberExpr(base=Identifier(name='a2'), member='s'), member='ar'), right=CallExpr(callee=Identifier(name='vec3'), args=[FloatLiteral(value=1.0)]))])))]))])
Here is the item: StructDecl(struct_type=StructType(name='S1', members=[StructField(type_name=TypeName(name='samplerCube', precision=None, qualifiers=[]), name='ar', array_size=[])]), declarators=[Declarator(name='a1', base_type=StructType(name='S1', members=[StructField(type_name=TypeName(name='samplerCube', precision=None, qualifiers=[]), name='ar', array_size=[])]), array_size=None, init=None, storage='uniform')])
Here is the fucking shit: StructDecl(struct_type=StructType(name='S1', members=[StructField(type_name=TypeName(name='samplerCube', precision=None, qualifiers=[]), name='ar', array_size=[])]), declarators=[Declarator(name='a1', base_type=StructType(name='S1', members=[StructField(type_name=TypeName(name='samplerCube', precision=None, qualifiers=[]), name='ar', array_size=[])]), array_size=None, init=None, storage='uniform')])
poopoofefefeffe
poopoofefefeffe
out: precision mediump float;
precision mediump int;

uniform struct S1 {
  samplerCube ar;
} a1
Here is the item: StructDecl(struct_type=StructType(name='S2', members=[StructField(type_name=TypeName(name='S1', precision=None, qualifiers=[]), name='s', array_size=[])]), declarators=[Declarator(name='a2', base_type=StructType(name='S2', members=[StructField(type_name=TypeName(name='S1', precision=None, qualifiers=[]), name='s', array_size=[])]), array_size=None, init=None, storage='uniform')])
Here is the fucking shit: StructDecl(struct_type=StructType(name='S2', members=[StructField(type_name=TypeName(name='S1', precision=None, qualifiers=[]), name='s', array_size=[])]), declarators=[Declarator(name='a2', base_type=StructType(name='S2', members=[StructField(type_name=TypeName(name='S1', precision=None, qualifiers=[]), name='s', array_size=[])]), array_size=None, init=None, storage='uniform')])
poopoofefefeffe
poopoofefefeffe
out: precision mediump float;
precision mediump int;

uniform struct S1 {
  samplerCube ar;
} a1;

uniform struct S2 {
  S1 s;
} a2
Here is the item: GlobalDecl(decls=[VarDecl(type_name=TypeName(name='vec4', precision=None, qualifiers=[]), name='v', array_dims=[], init=None)])
Here is the item: FunctionDef(return_type=TypeName(name='void', precision=None, qualifiers=[]), name='main', params=[], body=BlockStmt(stmts=[ExprStmt(expr=BinaryExpr(op='=', left=Identifier(name='v'), right=CallExpr(callee=Identifier(name='textureCube'), args=[BinaryExpr(op=',', left=MemberExpr(base=MemberExpr(base=Identifier(name='a2'), member='s'), member='ar'), right=CallExpr(callee=Identifier(name='vec3'), args=[FloatLiteral(value=1.0)]))])))]))
Got this source code back: precision mediump float;
precision mediump int;

uniform struct S1 {
  samplerCube ar;
} a1;

uniform struct S2 {
  S1 s;
} a2;

vec4 v;

void main()
{
  v = textureCube(a2.s.ar, vec3(1.0));
}


âœ” Roundtrip tests passed
